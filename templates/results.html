{% extends "base.html" %}

{% block content %}
<div class="results-container">
    <div class="results-header">
        <h2><i class="fas fa-chart-bar"></i> Analysis Results</h2>
        <p>File: {{ result.filename }}</p>
    </div>
    
    <div class="result-card">
        <h4>Predicted Sound Class</h4>
        <div class="prediction-result">
            <span class="predicted-class">{{ result.predicted_class }}</span>
            <span class="confidence">{{ "%.2f"|format(result.confidence * 100) }}% confidence</span>
        </div>
    </div>

    <div class="result-card">
        <h4>Class Probabilities</h4>
        {% for class_name, probability in result.class_probabilities.items() %}
        <div class="probability-item">
            <div class="class-name">{{ class_name }}</div>
            <div class="probability-bar">
                <div class="probability-fill" style="width: {{ "%.1f"|format(probability * 100) }}%">
                    {{ "%.1f"|format(probability * 100) }}%
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="metrics-grid">
        <div class="metric-card">
            <h5>Noise Level</h5>
            <div class="metric-value">{{ result.noise_analysis.level }}</div>
            <p>{{ "%.2f"|format(result.noise_analysis.decibels) }} dB</p>
        </div>
        <div class="metric-card">
            <h5>Spectral Centroid</h5>
            <div class="metric-value">{{ "%.2f"|format(result.noise_analysis.spectral_centroid_mean) }}</div>
            <p>Mean frequency</p>
        </div>
        <div class="metric-card">
            <h5>Energy Level</h5>
            <div class="metric-value">{{ "%.4f"|format(result.noise_analysis.energy_mean) }}</div>
            <p>RMS energy</p>
        </div>
        <div class="metric-card">
            <h5>Zero Crossing Rate</h5>
            <div class="metric-value">{{ "%.4f"|format(result.noise_analysis.zero_crossing_mean) }}</div>
            <p>Signal changes</p>
        </div>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <a href="{{ url_for('upload_file') }}" class="btn">
            <i class="fas fa-upload"></i> Analyze Another File
        </a>
    </div>
</div>
{% endblock %}